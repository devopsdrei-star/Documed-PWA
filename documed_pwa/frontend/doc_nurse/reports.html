<!-- Nurse/Doctor Reports Page -->
<!-- ...existing code from admin/reports.html, with updated JS and nav ... -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DocuMed</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/style.css?v=docnurse2">
  <link rel="stylesheet" href="../assets/css/docnurse_layout.css?v=1">
  <link rel="icon" type="image/png" href="../assets/images/documed_logo.png" />
</head>
<body>
   <div class="dashboard-wrapper">
    <aside class="sidebar">
      <div class="logo"><img src="../assets/images/documed_logo.png" alt="DocuMed" /></div>
      <nav class="sidebar-nav">
  <a href="dashboard.html"><i class="bi bi-grid"></i> Dashboard</a>
  <!-- <a href="appointments.html"><i class="bi bi-calendar-check"></i> Appointment</a> -->
  <a href="dn_patient.html"><i class="bi bi-person-lines-fill"></i> Patients</a>
  <a href="reports.html" class="active"><i class="bi bi-file-earmark-text"></i> Reports</a>
  <a href="settings.html"><i class="bi bi-gear"></i> Profile Info</a>
        <button class="logout"><i class="bi bi-box-arrow-right"></i> Logout</button>
      </nav>
    </aside>
    <main class="main-content">
      <div style="text-align:center;margin-bottom:32px;">
        <h1 style="color:#000000;font-size:2.2rem;letter-spacing:1px;margin-bottom:4px;">Clinic Diagnosis Reports</h1>
        <div style="color:#64748b;font-size:1.1rem;">Clinic Diagnosis, Statistics &amp; Analytics</div>
      </div>
      <div id="reports-content" style="background:rgba(255,255,255,0.97);box-shadow:0 8px 32px rgba(37,99,235,0.12);border-radius:16px;padding:32px 40px;width:100%;max-width:none;margin:0;min-height:80vh;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;">
          <!-- <h1 style="margin:0;font-size:1.5rem;color:#2563eb;">Diagnosis Reports</h1> -->
          <!-- Removed top right extra button to avoid duplication -->
        </div>
  <form id="reportForm" style="display:flex;flex-wrap:wrap;gap:18px 32px;align-items:flex-end;margin-bottom:12px;">
          <div id="dateInputs" style="flex:1 1 320px;display:flex;flex-direction:column;gap:8px;">
            <label id="dateLabel" for="dailyDate" style="font-weight:600;color:#000000;margin-bottom:2px;">Date:</label>
            <div style="display:flex;gap:12px;align-items:center;">
              <input type="date" id="dailyDate" name="dailyDate" style="display:none;padding:10px 14px;border-radius:10px;border:1.5px solid #a5a5a5;background:#f3f4f6;font-size:1rem;">
              <input type="date" id="weekStart" name="weekStart" style="display:none;padding:10px 14px;border-radius:10px;border:1.5px solid #a5a5a5;background:#f3f4f6;font-size:1rem;">
              <input type="date" id="weekEnd" name="weekEnd" style="display:none;padding:10px 14px;border-radius:10px;border:1.5px solid #a5a5a5;background:#f3f4f6;font-size:1rem;">
              <input type="month" id="monthInput" name="monthInput" style="display:none;padding:10px 14px;border-radius:10px;border:1.5px solid #a5a5a5;background:#f3f4f6;font-size:1rem;">
            </div>
          </div>
          <!-- Illness Stats Date Filter (visible only when Sort By = Illness Stats) -->
          <div id="illnessDateModeContainer" style="flex:0 1 220px;min-width:220px;display:none;">
            <label for="illnessDateMode" style="font-weight:600;color:#000000;margin-bottom:10px;display:block;">Date Filter:</label>
            <select id="illnessDateMode" name="illnessDateMode" style="width:100%;padding:10px 14px;border-radius:10px;border:1.5px solid #a5a5a5;background:#f3f4f6;font-size:1rem;">
              <option value="all">All</option>
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
              <option value="monthly">Monthly</option>
            </select>
          </div>
          <div style="display:flex;align-items:flex-end;gap:12px;margin-left:auto;">
            <div id="audienceContainer" style="display:flex;flex-direction:column;">
              <label for="audienceFilter" style="font-weight:600;color:#000000;margin-bottom:10px;">Patient Filter:</label>
              <select id="audienceFilter" class="form-select" style="width:220px;padding:10px 14px;border-radius:10px;border:1.5px solid #a5a5a5;background:#f3f4f6;font-size:1rem;">
                <option value="All">All</option>
                <option value="Student">Students</option>
                <option value="Faculty">Teachers</option>
                <option value="Staff">Non-Teaching</option>
              </select>
            </div>
              <div id="deptContainer" style="display:none;flex-direction:column;">
                <label for="deptFilter" style="font-weight:600;color:#000000;margin-bottom:10px;">Department</label>
                <select id="deptFilter" class="form-select" style="width:260px;padding:10px 14px;border-radius:10px;border:1.5px solid #a5a5a5;background:#f3f4f6;font-size:1rem;">
                  <option value="All">All</option>
                  <option value="CASL">CASL - Arts, Sciences and Letters</option>
                  <option value="CBPA">CBPA - Business and Public Administration</option>
                  <option value="CCS">CCS - Computing Sciences</option>
                  <option value="CHTM">CHTM - Hospitality and Tourism Management</option>
                  <option value="CTE">CTE - Teacher Education</option>
                  <option value="CIT">CIT - Industrial Technology</option>
                </select>
              </div>
              <div id="yearContainer" style="display:none;flex-direction:column;">
                <label for="yearFilter" style="font-weight:600;color:#000000;margin-bottom:10px;">Year</label>
                <select id="yearFilter" class="form-select" style="width:160px;padding:10px 14px;border-radius:10px;border:1.5px solid #a5a5a5;background:#f3f4f6;font-size:1rem;">
                  <option value="">All</option>
                  <option value="1">1st Year</option>
                  <option value="2">2nd Year</option>
                  <option value="3">3rd Year</option>
                  <option value="4">4th Year</option>
                </select>
              </div>
              <div id="courseContainer" style="display:none;flex-direction:column;">
                <label for="courseFilter" style="font-weight:600;color:#000000;margin-bottom:10px;">Course</label>
                <select id="courseFilter" class="form-select" style="width:320px;max-width:40vw;padding:10px 14px;border-radius:10px;border:1.5px solid #a5a5a5;background:#f3f4f6;font-size:1rem;">
                  <option value="">All</option>
                </select>
              </div>
            <button type="submit" class="btn" style="display:none;background:#2563eb;color:#fff;padding:12px 32px;border-radius:10px;font-size:1.08rem;box-shadow:0 2px 8px rgba(37,99,235,0.08);font-weight:600;">Generate</button>
          </div>
        </form>
        <div id="reportsLoading" style="display:none;margin-top:8px;color:#64748b;font-weight:600;">Loadingâ€¦</div>
        <div id="reportResult" style="margin-top:16px;"></div>

        <!-- Analytics row shown for Illness Stats: chart + summary with matching widths -->
        <div id="analyticsRow" style="display:none;grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); gap:16px; margin-top:16px; align-items:start;">
          <div id="chartCard" style="background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;box-shadow:0 2px 12px rgba(2,6,23,0.05);">
            <div style="font-weight:700;color:#111827;margin-bottom:8px;">Diagnosis Pie</div>
            <div style="width:100%;">
              <canvas id="pieChart" style="width:100%;height:auto;aspect-ratio:1/1;"></canvas>
            </div>
          </div>
          <div id="summaryCard" style="background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;box-shadow:0 2px 12px rgba(2,6,23,0.05);
          display:flex;flex-direction:column;gap:8px;">
            <div style="font-weight:700;color:#111827;">Summary</div>
            <div id="summaryBody" style="color:#374151;line-height:1.6;"></div>
            <div id="summaryTotal" style="margin-top:4px;color:#111827;font-weight:600;"></div>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script src="../assets/js/reports.js"></script>
  <script src="../assets/js/settings_dropdown.js"></script>
  <script src="../assets/js/dashboard_interactive.js"></script>
  <script src="../assets/js/dn_logout.js"></script>
</body>
</html>
